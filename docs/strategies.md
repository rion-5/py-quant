# 모멘텀 투자 전략: main.py 내용

## 1. 서론
본 보고서는 미국 주식 시장 데이터를 기반으로 한 모멘텀 투자 전략을 설명합니다. 이 전략은 최근 주식 가격의 상승 추세를 활용하여 높은 수익을 기대할 수 있는 종목을 선별하는 것을 목표로 합니다. Python을 사용한 데이터 수집 및 분석을 통해 최적의 투자 종목을 선정합니다.

## 2. 전략 개요
모멘텀 투자 전략은 주식의 최근 가격 움직임(모멘텀)을 기반으로 상승 추세에 있는 종목을 선별하는 방법입니다. 이 전략은 다음과 같은 주요 파라미터를 사용합니다:

- **분석 기간**: 시작 날짜와 종료 날짜를 설정하여 주식 데이터를 분석합니다.
- **최소 거래량**: 유동성을 보장하기 위해 일정 수준 이상의 거래량을 요구합니다.
- **가격 범위**: 주식 가격이 일정 범위 내에 있는 종목을 대상으로 합니다.
- **Sortino 비율**: 하방 리스크를 고려한 수익률 지표를 활용하여 안정성을 평가합니다.
- **주가 상승률**: 모멘텀 강도를 측정하기 위해 가격 차이 비율을 설정합니다.
- **상위 종목 수**: 최종적으로 선별할 상위 종목의 개수를 정합니다.



## 3 구현세부사항

### 3.1 기본 설정
- **분석 기간**: 최근 14일 (거래일 기준)
- **최소 거래량**: 10,000,000 주
- **주가 범위**: 50 ~ 1000
- **소르티노 지수**: -0.5 이상
- **주가 상승률**: 0.2 이상 (20% 이상)
- **상위 종목 수**: 20

### 3.2 파라미터 설정
- **arguments**
  - `--start_date`
  - `--end_date`
  - `--min_volume`
  - `--min_price`
  - `--min_sortino`
  - `--min_diff_ratio`
  - `--top_n`

### 3.3 종목선별 및 순위화 
- **fetch_momentum_symbols_from_db** : data.data_fetcher 으로부터 
  - db에서만 가능한 조건으로 종목 선별
  - 분석 기간
  - 최소 거래량
  - 주가 범위
  - 상위 종목
- **filter_and_rank_stocks** : strategies.momentum 으로부터
  - Ticker 선택된 종목들을 다시 yfinance 로부터 분석기간동안의 데이터를 실시간 조회
  - Sortino Ratio 계산하여 최소 조건에 맞지 않으면 그 종목은 더 이상 진행하지 않고 다음 종목으로 넘어감
  - Price Increase Ratio 계산 : (마지막 종가 - 첫 종가) / 첫 종가
  - Combined Score = Sortion Ratio + Price Increase Ration 계산
  - Price Range : 분석 기간동안 주가 범위 
  - Last Close : 마지막 거래일의 종가
  - Average Volume : 분석 기간동안 거래량 평균
  - 정렬 : Combined Score 기준 내림차순

### 3.4 필터된 종목 펀더멘탈 분석
- **fetch_stock_analysis** : analysis.financial_momentum 으로부터
  - **get_momentum_indicators** : data.data_fetcher 으로부터 yfinance 모멘텀 지표 가져오기
    - RSI
    - 52W High Ratio
    - 60-Day MA
    - 200-Day MA
    - 1M Change
    - 3M Change
    - 6M Change
    - 1Y Change
  - **get_value_indicators** : data.data_fetcher 으로부터 yfinance 가치 지표 가져오기
    - PER
    - PBR
    - EPS
    - ROE
    - Revenue Growth
    - Debt to Equity



**→ 주가의 추세 및 탄력을 보여주는 지표들입니다.**

| 지표명                               | 설명                                                                                               |
| --------------------------------- | ------------------------------------------------------------------------------------------------ |
| **RSI (Relative Strength Index)** | **상대강도지수**. 주가의 과매수(overbought) 또는 과매도(oversold) 상태를 측정. 보통 RSI가 70 이상이면 과매수, 30 이하면 과매도로 판단합니다. |
| **52W High Ratio**                | **52주 최고가 대비 현재가의 비율**. `현재가 / 52주 최고가`. 값이 1에 가까우면 최고가에 근접해 있고, 낮을수록 최근에 약세를 보였음을 의미합니다.        |
| **60-Day MA (60일 이동평균선)**         | 최근 60거래일 동안의 종가 평균. 주가의 단기 추세 파악에 사용되며, 현재 주가가 60일 MA를 상회하면 상승 추세로 간주됩니다.                        |
| **200-Day MA (200일 이동평균선)**       | 최근 200거래일 동안의 종가 평균. 장기적인 추세를 보여주며, 대표적인 추세 판단 지표입니다.                                            |
| **1M Change**                     | 최근 1개월(약 21 거래일) 동안의 주가 변화율. 모멘텀 투자에서 단기 상승을 평가할 때 사용됩니다.                                        |
| **3M Change**                     | 최근 3개월 동안의 주가 변화율.                                                                               |
| **6M Change**                     | 최근 6개월 동안의 주가 변화율.                                                                               |
| **1Y Change**                     | 최근 1년(12개월) 동안의 주가 변화율. **장기적인 모멘텀**을 볼 수 있는 지표입니다.                                              |

---



**→ 기업의 수익성, 성장성, 재무 건전성 등을 평가하는 '가치평가' 지표들입니다.**
| 지표명                               | 설명                                                                                    |
| --------------------------------- | ------------------------------------------------------------------------------------- |
| **PER (Price to Earnings Ratio)** | **주가수익비율**. `주가 / 주당순이익(EPS)`. 이 값이 낮을수록 이익 대비 주가가 낮다고 해석하며, 일반적으로 저평가된 기업으로 간주됩니다.   |
| **PBR (Price to Book Ratio)**     | **주가순자산비율**. `주가 / 주당순자산(BPS)`. 1보다 작으면 자산가치보다 낮게 거래되는 것으로 해석됩니다. (업종에 따라 해석 달라짐)     |
| **EPS (Earnings per Share)**      | **주당순이익**. 한 주당 회사가 벌어들인 순이익. 높을수록 수익성이 좋다고 평가됩니다.                                    |
| **ROE (Return on Equity)**        | **자기자본이익률**. `순이익 / 자기자본`. 주주가 투자한 자본 대비 얼마나 효율적으로 수익을 냈는지를 보여줍니다.                    |
| **Revenue Growth**                | 매출 성장률. 기업의 **성장성**을 판단할 수 있는 지표로, 연간 혹은 분기 기준으로 평가합니다.                               |
| **Debt to Equity (부채비율)**         | `부채 / 자기자본`. 기업의 재무 안정성을 나타냅니다. 값이 너무 높으면 재무 위험이 커질 수 있습니다. 일반적으로 100% 이하가 안정적이라 봅니다. |
